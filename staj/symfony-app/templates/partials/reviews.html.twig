<section id="reviews" class="gothic-reviews py-5">
    <div class="container">
        <div class="text-center mb-5">
            <div class="d-flex align-items-center justify-content-center mb-4">
                <i class="fas fa-eye gothic-section-icon text-purple me-3"></i>
                <h2 class="gothic-section-title gothic-gradient-text mb-0">{{ 'reviews_section_title'|trans }}</h2>
                <i class="fas fa-eye gothic-section-icon text-purple ms-3"></i>
            </div>
            <p class="gothic-section-subtitle">{{ 'reviews_section_subtitle'|trans }}</p>
        </div>

        <div class="row g-4">
            {% for review in reviews %} {# HomeController'dan gelen 'reviews' listesi üzerinde döngü #}
                <div class="col-lg-4 col-md-6">
                    <div class="gothic-review-card">
                        <div class="gothic-review-header">
                            <div class="gothic-review-avatar">
                                <span>{{ review.author|first }}</span> {# Yazar adı dinamik, ilk harfi alıyoruz #}
                            </div>
                            <div class="gothic-review-info">
                                <h4 class="gothic-review-name">{{ review.author }}</h4> {# Yazar adı dinamik #}
                                <p class="gothic-review-date">{{ review.date }}</p> {# Tarih dinamik #}
                            </div>
                        </div>

                        <div class="gothic-review-rating mb-3">
                            {% for i in 1..5 %}
                                {% if i <= review.rating %}
                                    <i class="fas fa-star text-danger"></i>
                                {% else %}
                                    <i class="far fa-star text-muted"></i>
                                {% endif %}
                            {% endfor %}

                            {% if review.verified is defined and review.verified %}
                                <span class="gothic-verified-badge ms-2">
                                    <i class="fas fa-skull me-1"></i>{{ 'review_verified_badge'|trans }}
                                </span>
                            {% endif %}
                        </div>

                        <p class="gothic-review-comment">"{{ review.comment }}"</p> {# Yorum metni dinamik #}
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="text-center mt-5">
            <div class="gothic-rating-summary">
                <i class="fas fa-star text-warning me-2"></i>
                <span class="gothic-rating-number">{{ stats.average_rating }}/5.0</span> {# Ortalama puan dinamik #}
                <span class="gothic-rating-text ms-3">
                    {# Değişkenleri çeviriye gönderiyoruz #}
                    {{ 'review_summary_text'|trans({
                        '%total_sales%': stats.total_sales,
                        '%happy_customers%': stats.happy_customers
                    }) }}
                </span>
            </div>
        </div>
    </div>
</section>
