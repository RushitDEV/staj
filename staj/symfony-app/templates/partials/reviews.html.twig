{# templates/partials/reviews.html.twig #}
<section id="reviews" class="gothic-reviews py-5">
    <div class="container">
        <div class="text-center mb-5">
            <div class="d-flex align-items-center justify-content-center mb-4">
                <i class="fas fa-eye gothic-section-icon text-purple me-3"></i>
                <h2 class="gothic-section-title gothic-gradient-text mb-0">Ruhlar Konuşuyor</h2>
                <i class="fas fa-eye gothic-section-icon text-purple ms-3"></i>
            </div>
            <p class="gothic-section-subtitle">Karanlık ruhların deneyimleri</p>
        </div>

        <div class="row g-4">
            {% for review in reviews %} {# HomeController'dan gelen 'reviews' listesi üzerinde döngü #}
                <div class="col-lg-4 col-md-6">
                    <div class="gothic-review-card">
                        <div class="gothic-review-header">
                            <div class="gothic-review-avatar">
                                {# 'customer_name' yerine 'author' kullanıldı #}
                                <span>{{ review.author|first }}</span>
                            </div>
                            <div class="gothic-review-info">
                                {# 'customer_name' yerine 'author' kullanıldı #}
                                <h4 class="gothic-review-name">{{ review.author }}</h4>
                                <p class="gothic-review-date">{{ review.date }}</p>
                            </div>
                        </div>

                        <div class="gothic-review-rating mb-3">
                            {% for i in 1..5 %}
                                {% if i <= review.rating %}
                                    <i class="fas fa-star text-danger"></i>
                                {% else %}
                                    <i class="far fa-star text-muted"></i>
                                {% endif %}
                            {% endfor %}

                            {# 'verified' anahtarı kontrolü eklendi, HomeController'da bu veriyi gönderdiğimizden emin olun #}
                            {% if review.verified is defined and review.verified %}
                                <span class="gothic-verified-badge ms-2">
                                    <i class="fas fa-skull me-1"></i>Doğrulanmış
                                </span>
                            {% endif %}
                        </div>

                        <p class="gothic-review-comment">"{{ review.comment }}"</p>
                    </div>
                </div>
            {% endfor %}
        </div>

        <div class="text-center mt-5">
            <div class="gothic-rating-summary">
                <i class="fas fa-star text-warning me-2"></i>
                {# 'stats.average_rating' HomeController'dan geldiği için burada kullanılabilir #}
                <span class="gothic-rating-number">{{ stats.average_rating }}/5.0</span>
                <span class="gothic-rating-text ms-3">
                    {# 'stats.total_sales' ve 'stats.happy_customers' HomeController'dan geldiği için burada kullanılabilir #}
                    {{ stats.total_sales }} karanlık eser, {{ stats.happy_customers }}+ karanlık ruh
                </span>
            </div>
        </div>
    </div>
</section>
